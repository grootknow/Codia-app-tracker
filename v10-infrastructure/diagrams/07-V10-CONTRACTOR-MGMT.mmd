%%{init: {'theme':'base', 'themeVariables': {'primaryColor':'#F3E5F5','primaryTextColor':'#7B1FA2','primaryBorderColor':'#7B1FA2','lineColor':'#424242','fontSize':'14px'}}}%%

graph TB
    %% ============================================================================
    %% V9 CONTRACTOR MANAGEMENT - AI-AUTOMATED ONBOARDING/OFFBOARDING
    %% ============================================================================
    
    subgraph CONTRACTOR_TYPES["ğŸ‘¥ CONTRACTOR TYPES (5)"]
        direction LR
        
        TYPE1["ğŸ’» DEVELOPER<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Access: VPS3, GitHub, Coolify<br/>Duration: 3-6 months<br/>Rate: $20-50/hour"]
        
        TYPE2["ğŸ¨ DESIGNER<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Access: Figma, Notion, Drive<br/>Duration: 1-3 months<br/>Rate: $15-40/hour"]
        
        TYPE3["âœï¸ WRITER<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Access: Notion, WordPress, Postiz<br/>Duration: Ongoing<br/>Rate: $10-30/hour"]
        
        TYPE4["ğŸ“‹ VA<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Access: Notion, Gmail, Slack<br/>Duration: Ongoing<br/>Rate: $5-15/hour"]
        
        TYPE5["ğŸ”§ SPECIALIST<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Access: All VPS, All DBs<br/>Duration: 1-6 months<br/>Rate: $50-150/hour"]
    end
    
    subgraph ONBOARDING["ğŸš€ AI-AUTOMATED ONBOARDING (Windmill)"]
        direction TB
        
        TRIGGER_ON["ğŸ“ TRIGGER<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>New row in Notion<br/>Database: 'Contractors'<br/>Status: 'Pending'"]
        
        STEP1["1ï¸âƒ£ CREATE ACCOUNTS<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Logto SSO account<br/>â€¢ Vaultwarden vault<br/>â€¢ Slack invitation<br/>Duration: <2 min"]
        
        STEP2["2ï¸âƒ£ PROVISION ACCESS<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ GitHub (if Developer)<br/>â€¢ VPS SSH (if Dev/Specialist)<br/>â€¢ Coolify (if Developer)<br/>â€¢ Notion workspace<br/>â€¢ Google Drive folders<br/>â€¢ Figma team (if Designer)<br/>Duration: <3 min"]
        
        STEP3["3ï¸âƒ£ SEND WELCOME EMAIL<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Login credentials<br/>â€¢ Resource links<br/>â€¢ Next steps<br/>â€¢ AI assistant access<br/>Duration: <1 min"]
        
        STEP4["4ï¸âƒ£ CREATE TASKS<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Complete profile<br/>â€¢ Review docs<br/>â€¢ Setup environment<br/>â€¢ First task<br/>Duration: <1 min"]
        
        STEP5["5ï¸âƒ£ NOTIFY TEAM<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Slack #team<br/>â€¢ Schedule kickoff call<br/>â€¢ Add to calendar<br/>Duration: <1 min"]
        
        TOTAL_ON["â±ï¸ TOTAL TIME<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>~8 minutes<br/>(100% automated)"]
    end
    
    subgraph OFFBOARDING["ğŸš« AI-AUTOMATED OFFBOARDING (Windmill)"]
        direction TB
        
        TRIGGER_OFF["ğŸ“ TRIGGER<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Status changed to<br/>'Offboarded'<br/>in Notion"]
        
        REVOKE1["1ï¸âƒ£ REVOKE ACCESS (IMMEDIATE)<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Disable Logto account<br/>â€¢ Remove GitHub access<br/>â€¢ Remove VPS SSH keys<br/>â€¢ Disable Coolify account<br/>â€¢ Deactivate Slack<br/>â€¢ Remove Notion access<br/>â€¢ Revoke Google Drive<br/>â€¢ Remove Figma access<br/>Duration: <2 min"]
        
        ARCHIVE["2ï¸âƒ£ ARCHIVE DATA<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Export contractor's work<br/>â€¢ Transfer ownership<br/>â€¢ Archive Vaultwarden vault<br/>Duration: <3 min"]
        
        FINANCE["3ï¸âƒ£ FINANCIAL CLEANUP<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Calculate final payment<br/>â€¢ Create invoice<br/>â€¢ Process payment (manual)<br/>â€¢ Update Notion<br/>Duration: <5 min"]
        
        EMAIL_OFF["4ï¸âƒ£ SEND OFFBOARDING EMAIL<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Thank you message<br/>â€¢ Final payment details<br/>â€¢ Work archive info<br/>Duration: <1 min"]
        
        SECURITY["5ï¸âƒ£ SECURITY AUDIT<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Check orphaned access<br/>â€¢ Rotate shared credentials<br/>â€¢ Review logs<br/>â€¢ Update docs<br/>Duration: <5 min"]
        
        TOTAL_OFF["â±ï¸ TOTAL TIME<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>~16 minutes<br/>(90% automated)"]
    end
    
    subgraph NOTION_DB["ğŸ“Š NOTION DATABASE: 'CONTRACTORS'"]
        direction TB
        
        FIELDS["ğŸ“‹ FIELDS<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Name (text)<br/>â€¢ Email (email)<br/>â€¢ Role (select)<br/>â€¢ Start Date (date)<br/>â€¢ End Date (date)<br/>â€¢ Hourly Rate (number)<br/>â€¢ Total Hours (formula)<br/>â€¢ Total Cost (formula)<br/>â€¢ Status (select)<br/>â€¢ Access Level (select)<br/>â€¢ Manager (person)<br/>â€¢ Notes (text)"]
        
        RELATIONS["ğŸ”— RELATIONS<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Tasks<br/>â€¢ Time Entries<br/>â€¢ Invoices<br/>â€¢ Projects"]
    end
    
    subgraph TIME_TRACKING["â±ï¸ TIME TRACKING"]
        direction LR
        
        TOGGL["â±ï¸ TOGGL TRACK<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Free for <5 users<br/>Integration: Windmill â†’ Toggl API<br/>Sync: Daily (11pm)"]
        
        NOTION_TIME["ğŸ“Š NOTION MANUAL<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Database: 'Time Tracking'<br/>Contractors log hours<br/>Windmill calculates totals"]
    end
    
    subgraph PAYMENT["ğŸ’° PAYMENT AUTOMATION"]
        direction TB
        
        WEEKLY_PAYMENT["ğŸ’µ WEEKLY PAYMENT PROCESSING<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Trigger: Every Friday 5pm<br/>Steps:<br/>1. Query unpaid hours<br/>2. Calculate total owed<br/>3. Create invoices (QuickBooks)<br/>4. Send to contractors<br/>5. Wait for approval (manual)<br/>6. Process payment (Wise/Mercury)<br/>7. Mark as paid<br/>8. Send confirmation<br/>9. Post to Slack #finance"]
        
        METHODS["ğŸ’³ PAYMENT METHODS<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Wise: International (low fees)<br/>â€¢ Mercury: US contractors (ACH)<br/>â€¢ PayPal: Backup (high fees)"]
    end
    
    %% Onboarding flow
    TRIGGER_ON --> STEP1
    STEP1 --> STEP2
    STEP2 --> STEP3
    STEP3 --> STEP4
    STEP4 --> STEP5
    STEP5 --> TOTAL_ON
    
    %% Offboarding flow
    TRIGGER_OFF --> REVOKE1
    REVOKE1 --> ARCHIVE
    ARCHIVE --> FINANCE
    FINANCE --> EMAIL_OFF
    EMAIL_OFF --> SECURITY
    SECURITY --> TOTAL_OFF
    
    %% Database connections
    TRIGGER_ON -.->|Read| NOTION_DB
    TRIGGER_OFF -.->|Read| NOTION_DB
    STEP1 -.->|Update| NOTION_DB
    REVOKE1 -.->|Update| NOTION_DB
    
    %% Time tracking
    TOGGL -.->|Sync| NOTION_TIME
    NOTION_TIME -.->|Calculate| WEEKLY_PAYMENT
    
    %% Styling
    classDef typeStyle fill:#E3F2FD,stroke:#1976D2,stroke-width:2px
    classDef onStyle fill:#E8F5E9,stroke:#388E3C,stroke-width:2px
    classDef offStyle fill:#FFEBEE,stroke:#C62828,stroke-width:2px
    classDef dbStyle fill:#FFF3E0,stroke:#F57C00,stroke-width:2px
    classDef timeStyle fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px
    classDef payStyle fill:#E1F5FE,stroke:#0277BD,stroke-width:2px
    
    class TYPE1,TYPE2,TYPE3,TYPE4,TYPE5 typeStyle
    class TRIGGER_ON,STEP1,STEP2,STEP3,STEP4,STEP5,TOTAL_ON onStyle
    class TRIGGER_OFF,REVOKE1,ARCHIVE,FINANCE,EMAIL_OFF,SECURITY,TOTAL_OFF offStyle
    class NOTION_DB,FIELDS,RELATIONS dbStyle
    class TOGGL,NOTION_TIME timeStyle
    class WEEKLY_PAYMENT,METHODS payStyle
