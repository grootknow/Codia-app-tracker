%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#E3F2FD','primaryTextColor':'#1565C0','primaryBorderColor':'#1976D2','lineColor':'#42A5F5','secondaryColor':'#F3E5F5','tertiaryColor':'#E8F5E9'}}}%%

%% TRM AI V10 - CONTRACTOR MANAGEMENT
%% Philosophy: "AI CÃ“ MÃY TÃNH RIÃŠNG" - AI manages contractors
%% Link: See NEW-V10-00-MASTER-OVERVIEW.mmd

graph TB
    subgraph ONBOARDING["ğŸ“¥ ONBOARDING"]
        NOTION["ğŸ“ Notion<br/>Contractor database"]
        WINDMILL["âš¡ Windmill<br/>Onboarding workflow"]
    end
    
    subgraph ACCESS["ğŸ” ACCESS CONTROL"]
        INFISICAL["ğŸ” Infisical<br/>Provision secrets"]
        COOLIFY["ğŸ³ Coolify<br/>Provision resources"]
    end
    
    subgraph TRACKING["ğŸ“Š TRACKING"]
        POSTGRES["ğŸ˜ PostgreSQL<br/>Time tracking"]
        NEO4J["ğŸ•¸ï¸ Neo4j<br/>Contractor graph"]
    end
    
    subgraph OFFBOARDING["ğŸ“¤ OFFBOARDING"]
        REVOKE["ğŸ”’ Revoke Access<br/>Auto-revoke secrets"]
        BACKUP["ğŸ’¾ Backup Data<br/>Archive work"]
    end
    
    NOTION -->|"Trigger"| WINDMILL
    WINDMILL -->|"Provision"| INFISICAL
    WINDMILL -->|"Provision"| COOLIFY
    INFISICAL -->|"Log"| POSTGRES
    POSTGRES -->|"Build graph"| NEO4J
    NEO4J -->|"Offboard"| REVOKE
    REVOKE -->|"Archive"| BACKUP
    
    BENEFITS["ğŸ¯ BENEFITS:<br/>âœ… Auto-onboarding<br/>âœ… Auto-offboarding<br/>âœ… Audit trail<br/>âœ… Zero manual work"]
    WINDMILL -.-> BENEFITS
    
    classDef onboardStyle fill:#E3F2FD,stroke:#1976D2,stroke-width:3px
    classDef accessStyle fill:#F3E5F5,stroke:#7B1FA2,stroke-width:3px
    classDef trackStyle fill:#E8F5E9,stroke:#388E3C,stroke-width:3px
    classDef offboardStyle fill:#FFF3E0,stroke:#F57C00,stroke-width:3px
    classDef benefitStyle fill:#FCE4EC,stroke:#C2185B,stroke-width:3px
    
    class NOTION,WINDMILL onboardStyle
    class INFISICAL,COOLIFY accessStyle
    class POSTGRES,NEO4J trackStyle
    class REVOKE,BACKUP offboardStyle
    class BENEFITS benefitStyle
