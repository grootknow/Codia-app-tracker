%%{init: {
  'theme': 'base',
  'themeVariables': {
    'primaryColor': '#E3F2FD',
    'primaryTextColor': '#1565C0',
    'primaryBorderColor': '#1976D2',
    'lineColor': '#424242',
    'secondaryColor': '#F3E5F5',
    'tertiaryColor': '#E8F5E9',
    'fontSize': '16px'
  }
}}%%

graph TB
    %% ============================================================================
    %% VPS3: DUAL AI SYSTEMS - "AI CÃ“ MÃY TÃNH RIÃŠNG" ğŸ”¥
    %% ============================================================================
    %% PARENT: 00-MASTER-OVERVIEW.mmd
    %% PHILOSOPHY: AI khÃ´ng chá»‰ chat, mÃ  EXECUTE CODE tháº­t!
    %% BREAKTHROUGH: 2 AI systems isolated - Product AI + Agent AI
    
    %% ============================================================================
    %% FOUNDER INTERFACE
    %% ============================================================================
    
    FOUNDER["ğŸ‘¤ FOUNDER<br/>Chat natural language"]
    LOBECHAT["ğŸ’¬ LOBECHAT<br/>AI Chat Interface<br/>2GB RAM"]
    WEBSOCKET["âš¡ WEBSOCKET<br/>Real-time Push<br/>200MB RAM"]
    
    %% ============================================================================
    %% PRODUCT AI - "AI CÃ“ MÃY TÃNH RIÃŠNG"
    %% ============================================================================
    
    subgraph PRODUCT_AI_SYSTEM["ğŸ’» PRODUCT AI (6GB) - AI CHO USER"]
        direction TB
        
        LG_PRODUCT["ğŸ”„ LANGGRAPH PRODUCT<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Cognitive Engine<br/>2GB RAM<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>âœ… Understand natural language<br/>âœ… Generate Python/JS code<br/>âœ… Query 22M triples<br/>âœ… Access 145+ MCP tools<br/>âœ… NO LIMITS!"]
        
        ZEP_PRODUCT["ğŸ§© ZEP PRODUCT<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Memory Management<br/>500MB RAM<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>âœ… Long-term memory<br/>âœ… Session management<br/>âœ… Context window optimization"]
        
        SKILLS_LIB["ğŸ“š SKILLS LIBRARY<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>100+ Workflows<br/>500MB RAM<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>âœ… Research reports<br/>âœ… Content generation<br/>âœ… Data analysis<br/>âœ… Brand guidelines<br/>âœ… Company workflows"]
        
        CF_GATEWAY["ğŸŒ CONTEXTFORGE<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>MCP Gateway<br/>500MB RAM<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>145+ MCP tools<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Virtual MCPs:<br/>Coolify, Gitea, Windmill<br/>Grafana, Prometheus<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Custom MCPs:<br/>Infrastructure, Database<br/>Backup, Lakehouse"]
    end
    
    %% ============================================================================
    %% AGENT AI - "AI OPERATIONS"
    %% ============================================================================
    
    subgraph AGENT_AI_SYSTEM["ğŸ¤– AGENT AI (3GB) - AI CHO Há»† THá»NG"]
        direction TB
        
        LG_AGENT["ğŸ”„ LANGGRAPH AGENT<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Agent Orchestrator<br/>1GB RAM<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>âœ… Coordinate 8 agents<br/>âœ… Auto-triage alerts<br/>âœ… Self-healing workflows<br/>âœ… 90% automation"]
        
        ZEP_AGENT["ğŸ§© ZEP AGENT<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Agent Memory<br/>300MB RAM<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>âœ… Incident history<br/>âœ… Pattern recognition<br/>âœ… Learning from fixes"]
        
        subgraph EIGHT_AGENTS["ğŸ¤– 8 AUTONOMOUS AGENTS (1.5GB)"]
            direction LR
            
            AGENT_DEVOPS["ğŸš€ DevOps Agent<br/>Auto-deploy<br/>Auto-fix"]
            AGENT_DATA["ğŸ“Š Data Agent<br/>Monitor CDC<br/>Trigger backups"]
            AGENT_ALERT["ğŸš¨ Alert Agent<br/>Triage alerts<br/>Auto-respond"]
            AGENT_FINANCE["ğŸ’° Finance Agent<br/>Cost monitoring<br/>Budget alerts"]
            AGENT_DOC["ğŸ“ Doc Agent<br/>Auto-generate docs<br/>Keep updated"]
            AGENT_COMPLIANCE["âœ… Compliance Agent<br/>Security audits<br/>GDPR compliance"]
            AGENT_TEST["ğŸ§ª Test Agent<br/>Auto-test<br/>Regression checks"]
            AGENT_LEARNING["ğŸ“ Learning Agent<br/>Analyze patterns<br/>Suggest optimizations"]
        end
        
        ALERTA["ğŸš¨ ALERTA<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Alert Hub<br/>800MB RAM<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>âœ… Aggregate all alerts<br/>âœ… Auto-triage by AI<br/>âœ… Route to agents<br/>âœ… Escalate if needed"]
    end
    
    %% ============================================================================
    %% EXTERNAL SERVICES
    %% ============================================================================
    
    AI_MODELS["ğŸ§  AI MODELS<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Claude 4.5 Sonnet<br/>Grok 4 Fast<br/>Gemini 2.0<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>âœ… Pluggable<br/>âœ… Swap anytime"]
    
    %% ============================================================================
    %% CONNECTIONS - PRODUCT AI FLOWS
    %% ============================================================================
    
    %% Founder â†’ Product AI
    FOUNDER -->|Chat| LOBECHAT
    LOBECHAT -->|Parse| LG_PRODUCT
    LG_PRODUCT -->|Response| LOBECHAT
    LOBECHAT -->|Display| FOUNDER
    WEBSOCKET -->|Push updates| FOUNDER
    
    %% Product AI Internal
    LG_PRODUCT --> ZEP_PRODUCT
    LG_PRODUCT --> SKILLS_LIB
    LG_PRODUCT --> CF_GATEWAY
    
    %% Product AI â†’ External
    LG_PRODUCT --> AI_MODELS
    
    %% ============================================================================
    %% CONNECTIONS - AGENT AI FLOWS
    %% ============================================================================
    
    %% Agent Orchestration
    LG_AGENT --> ZEP_AGENT
    LG_AGENT --> ALERTA
    
    %% 8 Agents â†’ Orchestrator
    AGENT_DEVOPS --> LG_AGENT
    AGENT_DATA --> LG_AGENT
    AGENT_ALERT --> LG_AGENT
    AGENT_FINANCE --> LG_AGENT
    AGENT_DOC --> LG_AGENT
    AGENT_COMPLIANCE --> LG_AGENT
    AGENT_TEST --> LG_AGENT
    AGENT_LEARNING --> LG_AGENT
    
    %% Agents â†’ MCP Gateway
    AGENT_DEVOPS --> CF_GATEWAY
    AGENT_DATA --> CF_GATEWAY
    AGENT_ALERT --> CF_GATEWAY
    
    %% Agent AI â†’ External
    LG_AGENT --> AI_MODELS
    
    %% ============================================================================
    %% ISOLATION - CRITICAL!
    %% ============================================================================
    
    %% Note: Product AI and Agent AI are COMPLETELY ISOLATED
    %% - Separate LangGraph instances
    %% - Separate databases (on VPS2)
    %% - Separate Docker resource limits
    %% - Different AI models (Product=Claude, Agent=Grok)
    
    %% ============================================================================
    %% STYLING
    %% ============================================================================
    
    classDef founderStyle fill:#E3F2FD,stroke:#1976D2,stroke-width:3px
    classDef interfaceStyle fill:#E1F5FE,stroke:#0277BD,stroke-width:2px
    classDef productAIStyle fill:#F3E5F5,stroke:#7B1FA2,stroke-width:4px
    classDef agentAIStyle fill:#E8F5E9,stroke:#388E3C,stroke-width:4px
    classDef externalStyle fill:#FFCCBC,stroke:#E64A19,stroke-width:2px
    
    class FOUNDER founderStyle
    class LOBECHAT,WEBSOCKET interfaceStyle
    class LG_PRODUCT,ZEP_PRODUCT,SKILLS_LIB,CF_GATEWAY productAIStyle
    class LG_AGENT,ZEP_AGENT,AGENT_DEVOPS,AGENT_DATA,AGENT_ALERT,AGENT_FINANCE,AGENT_DOC,AGENT_COMPLIANCE,AGENT_TEST,AGENT_LEARNING,ALERTA agentAIStyle
    class AI_MODELS externalStyle
