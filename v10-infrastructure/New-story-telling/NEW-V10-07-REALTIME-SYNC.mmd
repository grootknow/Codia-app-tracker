%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#E3F2FD','primaryTextColor':'#1565C0','primaryBorderColor':'#1976D2','lineColor':'#42A5F5','secondaryColor':'#F3E5F5','tertiaryColor':'#E8F5E9'}}}%%

%% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
%% TRM AI PRODUCTION SYSTEM V10 - REAL-TIME SYNC & DASHBOARD
%% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
%% Philosophy: "AI CÃ“ MÃY TÃNH RIÃŠNG" - <200ms sync across 4 screens
%% Link: See NEW-V10-00-MASTER-OVERVIEW.mmd for full context
%% Date: 2025-01-05
%% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

graph TB
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    %% LAYER 1: FOUNDER (4 SCREENS)
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    
    subgraph FOUNDER["ğŸ‘¤ FOUNDER (4 Screens)"]
        SCREEN1["ğŸ’» Screen 1<br/>LobeChat<br/>âš¡ Chat with AI"]
        SCREEN2["ğŸ“Š Screen 2<br/>Reflex Dashboard<br/>âš¡ Real-time metrics"]
        SCREEN3["ğŸ“ Screen 3<br/>Notion<br/>âš¡ Documents"]
        SCREEN4["ğŸ’¬ Screen 4<br/>Slack<br/>âš¡ Team chat"]
    end
    
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    %% LAYER 2: REAL-TIME SYNC HUB
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    
    subgraph SYNC_HUB["ğŸ”„ REAL-TIME SYNC HUB"]
        SUPABASE["ğŸ”„ Supabase Realtime<br/>500MB RAM<br/>âš¡ WebSocket hub<br/>âš¡ <200ms latency<br/>âš¡ Postgres CDC"]
        REFLEX_ENGINE["ğŸ¨ Reflex Engine<br/>800MB RAM<br/>âš¡ Python â†’ React<br/>âš¡ Auto-generated UI<br/>âš¡ State management"]
    end
    
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    %% LAYER 3: DUAL AI SYSTEMS
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    
    subgraph AI_SYSTEMS["ğŸ¤– DUAL AI SYSTEMS"]
        PRODUCT_AI["ğŸ¤– AI CÃ“ MÃY TÃNH RIÃŠNG<br/>6GB RAM<br/>âš¡ Works FOR USER<br/>âš¡ Research, content, analysis"]
        AGENT_AI["ğŸ¤– AI OPERATIONS<br/>3GB RAM<br/>âš¡ Works FOR SYSTEM<br/>âš¡ Auto-deploy, monitoring"]
    end
    
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    %% LAYER 4: DATA SOURCES
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    
    subgraph DATA_SOURCES["ğŸ—„ï¸ DATA SOURCES"]
        POSTGRES["ğŸ˜ PostgreSQL<br/>âš¡ Structured data<br/>âš¡ CDC enabled"]
        NEO4J["ğŸ•¸ï¸ Neo4j<br/>âš¡ Knowledge graph<br/>âš¡ Real-time queries"]
        REDIS["âš¡ Redis<br/>âš¡ Session cache<br/>âš¡ Pub/Sub"]
    end
    
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    %% LAYER 5: EXTERNAL INTEGRATIONS
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    
    subgraph EXTERNAL["ğŸŒ EXTERNAL INTEGRATIONS"]
        NOTION_API["ğŸ“ Notion API<br/>âš¡ Webhooks"]
        SLACK_API["ğŸ’¬ Slack API<br/>âš¡ Events API"]
    end
    
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    %% LAYER 6: DATA FLOWS
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    
    %% Founder â†’ Sync Hub
    SCREEN1 <-->|"WebSocket<br/><200ms"| SUPABASE
    SCREEN2 <-->|"WebSocket<br/><200ms"| REFLEX_ENGINE
    SCREEN3 <-->|"Webhook"| NOTION_API
    SCREEN4 <-->|"Events API"| SLACK_API
    
    %% Sync Hub â†’ AI Systems
    SUPABASE <-->|"Real-time events"| PRODUCT_AI
    SUPABASE <-->|"Real-time events"| AGENT_AI
    REFLEX_ENGINE <-->|"State updates"| PRODUCT_AI
    
    %% AI Systems â†’ Data Sources
    PRODUCT_AI <-->|"Query/Update"| POSTGRES
    PRODUCT_AI <-->|"Query/Update"| NEO4J
    PRODUCT_AI <-->|"Cache"| REDIS
    
    AGENT_AI <-->|"Monitor"| POSTGRES
    AGENT_AI <-->|"Monitor"| NEO4J
    
    %% Data Sources â†’ Sync Hub (CDC)
    POSTGRES -->|"CDC<br/>Change events"| SUPABASE
    NEO4J -->|"Query results"| SUPABASE
    REDIS -->|"Pub/Sub"| SUPABASE
    
    %% External â†’ Sync Hub
    NOTION_API -->|"Webhooks"| SUPABASE
    SLACK_API -->|"Events"| SUPABASE
    
    %% Sync Hub â†’ All Screens (Broadcast)
    SUPABASE -.->|"Broadcast<br/><200ms"| SCREEN1
    SUPABASE -.->|"Broadcast<br/><200ms"| SCREEN2
    SUPABASE -.->|"Broadcast<br/><200ms"| SCREEN3
    SUPABASE -.->|"Broadcast<br/><200ms"| SCREEN4
    
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    %% LAYER 7: BENEFITS
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    
    BENEFITS["ğŸ¯ REAL-TIME BENEFITS:<br/>âœ… <200ms sync across 4 screens<br/>âœ… AI understands context from ALL apps<br/>âœ… Change in Notion â†’ AI sees it instantly<br/>âœ… Slack message â†’ AI responds in LobeChat<br/>âœ… Dashboard updates â†’ All screens sync<br/>âœ… Zero manual refresh needed"]
    
    SUPABASE -.->|"Delivers"| BENEFITS
    
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    %% STYLING
    %% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    
    classDef founderStyle fill:#E3F2FD,stroke:#1976D2,stroke-width:3px,color:#0D47A1
    classDef syncStyle fill:#F3E5F5,stroke:#7B1FA2,stroke-width:3px,color:#4A148C
    classDef aiStyle fill:#FFF3E0,stroke:#F57C00,stroke-width:3px,color:#E65100
    classDef dataStyle fill:#E8F5E9,stroke:#388E3C,stroke-width:3px,color:#1B5E20
    classDef externalStyle fill:#E0F2F1,stroke:#00796B,stroke-width:3px,color:#004D40
    classDef benefitStyle fill:#FCE4EC,stroke:#C2185B,stroke-width:3px,color:#880E4F
    
    class SCREEN1,SCREEN2,SCREEN3,SCREEN4 founderStyle
    class SUPABASE,REFLEX_ENGINE syncStyle
    class PRODUCT_AI,AGENT_AI aiStyle
    class POSTGRES,NEO4J,REDIS dataStyle
    class NOTION_API,SLACK_API externalStyle
    class BENEFITS benefitStyle
