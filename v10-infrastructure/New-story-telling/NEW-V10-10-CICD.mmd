%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#E3F2FD','primaryTextColor':'#1565C0','primaryBorderColor':'#1976D2','lineColor':'#42A5F5','secondaryColor':'#F3E5F5','tertiaryColor':'#E8F5E9'}}}%%

%% TRM AI V10 - CI/CD PIPELINE
%% Philosophy: "AI CÃ“ MÃY TÃNH RIÃŠNG" - AI auto-deploys code
%% Link: See NEW-V10-00-MASTER-OVERVIEW.mmd

graph TB
    subgraph SOURCE["ğŸ“¦ SOURCE"]
        GITHUB["ğŸ¦Š GitHub<br/>Git repository"]
    end
    
    subgraph CI["ğŸ”„ CI PIPELINE"]
        GITEA["ğŸ¦Š Gitea Actions<br/>800MB | Self-hosted CI"]
        TRIVY["ğŸ›¡ï¸ Trivy<br/>300MB | Security scan"]
        ZOT["ğŸ“¦ Zot Registry<br/>500MB | OCI registry"]
    end
    
    subgraph CD["ğŸš€ CD PIPELINE"]
        COOLIFY["ğŸ³ Coolify<br/>2GB | Auto-deploy"]
        KAMAL["ğŸš€ Kamal<br/>200MB | IaC deploy"]
    end
    
    subgraph SECURITY["ğŸ”’ SECURITY"]
        INFISICAL["ğŸ” Infisical<br/>500MB | Secrets"]
        FALCO["ğŸ‘ï¸ Falco<br/>300MB | Runtime security"]
    end
    
    GITHUB -->|"Push code"| GITEA
    GITEA -->|"Build image"| TRIVY
    TRIVY -->|"Scan vulnerabilities"| ZOT
    ZOT -->|"Store image"| COOLIFY
    INFISICAL -->|"Inject secrets"| COOLIFY
    COOLIFY -->|"Deploy"| KAMAL
    KAMAL -->|"Monitor runtime"| FALCO
    
    BENEFITS["ğŸ¯ BENEFITS:<br/>âœ… AI auto-deploys<br/>âœ… Security scan built-in<br/>âœ… <5min deploy time<br/>âœ… Zero downtime"]
    COOLIFY -.-> BENEFITS
    
    classDef sourceStyle fill:#E3F2FD,stroke:#1976D2,stroke-width:3px
    classDef ciStyle fill:#F3E5F5,stroke:#7B1FA2,stroke-width:3px
    classDef cdStyle fill:#E8F5E9,stroke:#388E3C,stroke-width:3px
    classDef securityStyle fill:#FFF3E0,stroke:#F57C00,stroke-width:3px
    classDef benefitStyle fill:#FCE4EC,stroke:#C2185B,stroke-width:3px
    
    class GITHUB sourceStyle
    class GITEA,TRIVY,ZOT ciStyle
    class COOLIFY,KAMAL cdStyle
    class INFISICAL,FALCO securityStyle
    class BENEFITS benefitStyle
